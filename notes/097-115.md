## Redux：097 ~ 102
> [redux中文文档](http://www.redux.org.cn/)

### redux理解
用于做状态管理的JS库，
集中式状态管理，共享状态

### redux的三个核心概念
- redux原理图[图片](../img/redux_%E5%8E%9F%E7%90%86%E5%9B%BE.png)
1. action
    - 动作的对象
        - type: 标识属性，值为字符串，唯一，必要属性
        - data: 数据属性，值类型任意，可选属性
    ```js
    {type: 'ADD_STUDENT', data:{name: 'tom', age: 18}}
    ```
2. reducer
    - 用于初始化状态、加工状态
    - 加工时，根据旧的state和action, 产生新的state的纯函数
3. store
    - 将state、action、reducer联系在一起的对象

### 编写案例
- 纯react版求和案例

- redux完整版

- 异步action版

- action类型
    - Object：同步action
    - function：异步action (函数中可以创建异步任务 )
        - 异步action需要借助中间件处理 redux-thunk
        - applyMiddleware

-----------
## react-redux：102 ~ 115
- react-redux模型图
[react-redux模型图](../img/react-redux%E6%A8%A1%E5%9E%8B%E5%9B%BE.png)

- 连接容器组件与UI组件
    - connect(mapStateToProps, mapDispatchToProps)
    - mapDispatchToProps: 两种值
        - 可以是函数
        - 可以是对象

- Provider
    会将store传给包裹的容器内部的每个容器组件

- 数据共享（109 ~ 111）------------------------  补代码
    - 多个reducer时 --- 合并reducer: combineReducers({reducer1, reducer2, ...})

- 纯函数 ***重点***
    - 一个知识点：
        - 数组方法：shift、unshift、push、pop等操作原数组的数组方法不能在reducer中使用，
            会造成数组改变到时画面不更新的bug，因为react底层会将两次数组进行浅比较，发现
            两次数组都是同一指针，不会进行画面更新。
        - reducer更新时使用数组展开运算符，返回新数组
            ```js
            [newItemObj, ...initArray]
            ```
    - 什么是纯函数？：
        - 一类特别的函数：只要是同样的输入(实参)，必定得到同样的输出(函数返回值)。
        - 必须遵守一下一些约束：
            - 不得改写参数数据
            - 不会产生任何副作用, 例如网络请求，输入和输出设备
            - 不能调用Date.now()或者Math.random()等不纯的方法
        - **redux的reducer函数必须是一个纯函数**

- redux开发者工具
    - redux DevTools
    - 配置方法：
        - npm install redux-devtools-extension
        - 在store中配置
        ```js
            //引入redux-devtools-extension
            import {composeWithDevTools} from 'redux-devtools-extension'

            const store = createStore(countReducer, composeWithDevTools(applyMiddleware(thunk)))
        ```